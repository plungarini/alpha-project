(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"2Pii":function(t,i,e){"use strict";e.d(i,"a",function(){return u});var n=e("mrSG"),s=e("LRne"),o=e("eIep"),c=e("IzEk"),l=e("fXoL"),r=e("L7YA"),a=e("lyTB");let u=(()=>{class t{constructor(t,i){this.db=t,this.auth=i,this.path="/notifications/"}add(t){return Object(n.a)(this,void 0,void 0,function*(){const i=t.id?t.id:this.db.generateId();t.id=i,t.sendTo.forEach(e=>{const n=t;n.toRead=!0,n.sendTo=[],this.db.upsert("users/"+e.id+this.path+i,n)}),this.db.upsert("announcements/"+i,t)})}getByUser(t){return this.db.colWithIds$(`users/${t}${this.path}`)}userHasToRead(t){return this.db.colWithIds$(`users/${t}${this.path}`).pipe(Object(o.a)(t=>{let i=!1;return t.forEach(t=>{i=!!t.toRead||i}),Object(s.a)(i)}))}readAllNotifications(t){t.forEach(t=>{t.toRead&&this.auth.user$.pipe(Object(c.a)(1)).subscribe(i=>{i&&(t.toRead=!1,this.db.upsert("users/"+i.id+this.path+t.id,t))})})}}return t.\u0275fac=function(i){return new(i||t)(l.Wb(r.a),l.Wb(a.a))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},PT0D:function(t,i,e){"use strict";e.d(i,"a",function(){return w});var n=e("fXoL"),s=e("ofXK"),o=e("tyNb"),c=e("3c/+");const l=function(t){return{"transform scale-105 translate-y-1":t}};function r(t,i){if(1&t&&(n.Qb(0),n.Sb(1,"div",3),n.Sb(2,"object",4),n.ec(3,"safeUrl"),n.Nb(4,"img",5),n.Rb(),n.Rb(),n.Pb()),2&t){const t=n.dc(2);n.Ab(1),n.jc("ngClass",n.lc(8,l,t.imgMarginTopFix)),n.Ab(1),n.Cb(t.classes1),n.jc("data",n.fc(3,6,t.user.img),n.wc),n.Ab(2),n.Cb(t.classes1)}}function a(t,i){if(1&t&&(n.Qb(0),n.Sb(1,"div",6),n.Sb(2,"div"),n.Sb(3,"p",7),n.Ec(4),n.Rb(),n.Rb(),n.Rb(),n.Pb()),2&t){const t=n.dc(2);n.Ab(2),n.Cb(t.classes2),n.Ab(2),n.Fc(t.initials)}}function u(t,i){if(1&t&&(n.Cc(0,r,5,10,"ng-container",2),n.Cc(1,a,5,3,"ng-container",2)),2&t){const t=n.dc();n.jc("ngIf",t.user.img),n.Ab(1),n.jc("ngIf",!t.user.img)}}function b(t,i){1&t&&n.Ob(0)}function d(t,i){if(1&t&&(n.Sb(0,"div",8),n.Sb(1,"div"),n.Cc(2,b,1,0,"ng-container",9),n.Rb(),n.Sb(3,"div",10),n.Sb(4,"div",11),n.Ec(5),n.Rb(),n.Sb(6,"div",12),n.Ec(7),n.Rb(),n.Rb(),n.Rb()),2&t){const t=n.dc(),i=n.tc(1);n.Ab(1),n.Cb(t.classes3),n.Ab(1),n.jc("ngTemplateOutlet",i),n.Ab(3),n.Gc(" ",t.user.fullName," "),n.Ab(2),n.Gc(" ",t.user.email," ")}}function p(t,i){1&t&&n.Ob(0)}function f(t,i){if(1&t&&(n.Qb(0),n.Sb(1,"div",13),n.Sb(2,"a",14),n.Sb(3,"ul",15),n.Sb(4,"li",16),n.Sb(5,"div",17),n.Cc(6,p,1,0,"ng-container",9),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Pb()),2&t){const t=n.dc(),i=n.tc(3);n.Ab(2),n.Eb("cursor-pointer",t.enableProfileLink),n.jc("routerLink",t.enableProfileLink?"/profile":null),n.Ab(4),n.jc("ngTemplateOutlet",i)}}function h(t,i){}function g(t,i){1&t&&n.Cc(0,h,0,0,"ng-template")}function m(t,i){if(1&t&&(n.Qb(0),n.Sb(1,"a",18),n.Cc(2,g,1,0,void 0,9),n.Rb(),n.Pb()),2&t){const t=n.dc(),i=n.tc(1);n.Ab(1),n.Eb("cursor-pointer",t.enableProfileLink),n.jc("routerLink",t.enableProfileLink?"/profile":null),n.Ab(1),n.jc("ngTemplateOutlet",i)}}function C(t,i){1&t&&n.Ob(0)}function k(t,i){if(1&t&&(n.Qb(0),n.Sb(1,"a",14),n.Cc(2,C,1,0,"ng-container",9),n.Rb(),n.Pb()),2&t){const t=n.dc(),i=n.tc(3);n.Ab(1),n.jc("routerLink",t.enableProfileLink?"/profile":null),n.Ab(1),n.jc("ngTemplateOutlet",i)}}let w=(()=>{class t{constructor(t){this.cdRef=t,this.displayType="card",this.enableProfileLink=!0,this.imgMarginTopFix=!1,this.placeholdUser={img:"",fullName:"Pietro Lungarini",email:"pietro@lungarini.it",color:"indigo"},this.user=this.placeholdUser,this.imgSize=10,this.classes1="mx-auto object-cover rounded-full ",this.classes2="mx-auto object-cover rounded-full ",this.classes3="flex flex-col justify-center items-center mr-3 ",this.initials=null,this.bgColor="mx-auto object-cover rounded-full "}set setUser(t){t&&(t.img=t.img?t.img:"",t.fullName=t.fullName?t.fullName:"",t.email=t.email?t.email:"",t.color=t.color?t.color:"indigo"),this.user=t||this.placeholdUser,this.genInitials(),this.initColor(),this.initSizeClasses(),this.cdRef.detectChanges()}ngOnInit(){}genInitials(){if(!this.user||!this.user.email||this.user.img)return;const t=this.user.fullName?this.user.fullName.split(" ")[0][0]:this.user.email[0],i=this.user.fullName?this.user.fullName.split(" ")[1][0]:this.user.email[1];this.initials=t.toUpperCase()+i.toUpperCase()}initColor(){this.user&&(this.bgColor=" bg-"+this.user.color+"-400")}initSizeClasses(){this.classes1+="h-"+this.imgSize+" w-"+this.imgSize,this.classes2+=this.bgColor+" h-"+this.imgSize+" w-"+this.imgSize,this.classes3+="h-"+this.imgSize+" w-"+this.imgSize}}return t.\u0275fac=function(i){return new(i||t)(n.Mb(n.h))},t.\u0275cmp=n.Gb({type:t,selectors:[["app-avatar"]],inputs:{setUser:["user","setUser"],displayType:"displayType",enableProfileLink:"enableProfileLink",imgMarginTopFix:"imgMarginTopFix"},decls:7,vars:3,consts:[["profileImg",""],["fullAvatar",""],[4,"ngIf"],[1,"block","relative",3,"ngClass"],["type","image/png",3,"data"],["src","assets/icons/no-user-ph.png"],[1,"block","relative"],[1,"text-lg","block","font-bold","mx-auto","w-min","text-gray-200",2,"padding-top","0.43rem"],[1,"select-none","cursor-pointer","flex","flex-1","items-center"],[4,"ngTemplateOutlet"],[1,"flex-1","pl-1",2,"max-width","8rem"],[1,"dark:text-gray-300","font-semibold","whitespace-nowrap","truncate","w-full","max-w-full",2,"font-size",".9rem"],[1,"text-gray-400","dark:text-gray-400","text-sm","whitespace-nowrap","truncate","w-full","max-w-full"],[1,"container","flex","flex-col","mx-auto","w-full","items-center","justify-center"],[3,"routerLink"],[1,"flex","flex-col"],[1,"border-gray-400","flex","flex-row","mb-2"],[1,"shadow","border","bg-white","dark:bg-black-800","rounded-md","flex-1","p-4"],[1,"shadow-sm","rounded-full",3,"routerLink"]],template:function(t,i){1&t&&(n.Cc(0,u,2,2,"ng-template",null,0,n.Dc),n.Cc(2,d,8,5,"ng-template",null,1,n.Dc),n.Cc(4,f,7,4,"ng-container",2),n.Cc(5,m,3,4,"ng-container",2),n.Cc(6,k,3,2,"ng-container",2)),2&t&&(n.Ab(4),n.jc("ngIf","card"===i.displayType),n.Ab(1),n.jc("ngIf","img"===i.displayType),n.Ab(1),n.jc("ngIf","raw"===i.displayType))},directives:[s.m,s.k,s.q,o.j],pipes:[c.a],encapsulation:2,changeDetection:0}),t})()},"dG+U":function(t,i,e){"use strict";e.d(i,"a",function(){return x});var n=e("fXoL"),s=e("ofXK"),o=e("tyNb"),c=e("n45d");function l(t,i){if(1&t&&n.Nb(0,"i-bs",11),2&t){const t=n.dc().$implicit;n.jc("name",t.icon)}}const r=function(t){return{selected:t}};function a(t,i){if(1&t){const t=n.Tb();n.Sb(0,"div",8),n.Zb("click",function(){n.vc(t);const e=i.$implicit,s=i.index,o=n.dc(2).index;return n.dc(2).optionClicked(e,o,s)}),n.Sb(1,"a",9),n.Cc(2,l,1,1,"i-bs",10),n.Ec(3),n.Rb(),n.Rb()}if(2&t){const t=i.$implicit;n.Ab(1),n.jc("routerLink",t.url)("ngClass",n.lc(4,r,t.selected)),n.Ab(1),n.jc("ngIf",!!t.icon),n.Ab(1),n.Gc(" ",t.name," ")}}function u(t,i){if(1&t&&(n.Qb(0),n.Cc(1,a,4,6,"div",7),n.Pb()),2&t){const t=n.dc().$implicit;n.Ab(1),n.jc("ngForOf",t.childrens)}}function b(t,i){if(1&t&&n.Nb(0,"i-bs",11),2&t){const t=n.dc(2).$implicit;n.jc("name",t.icon)}}function d(t,i){if(1&t){const t=n.Tb();n.Sb(0,"a",12),n.Zb("click",function(){n.vc(t);const i=n.dc(),e=i.$implicit,s=i.index;return n.dc(2).optionClicked(e,s)}),n.Cc(1,b,1,1,"i-bs",10),n.Ec(2),n.Rb()}if(2&t){const t=n.dc().$implicit;n.jc("routerLink",t.url)("ngClass",n.lc(4,r,t.selected)),n.Ab(1),n.jc("ngIf",!!t.icon),n.Ab(1),n.Gc(" ",t.name," ")}}function p(t,i){if(1&t&&(n.Qb(0),n.Cc(1,u,2,1,"ng-container",3),n.Cc(2,d,3,6,"ng-template",null,6,n.Dc),n.Pb()),2&t){const t=i.$implicit,e=n.tc(3);n.Ab(1),n.jc("ngIf",!!t&&"group"===t.type)("ngIfElse",e)}}function f(t,i){if(1&t&&(n.Qb(0),n.Cc(1,p,4,2,"ng-container",5),n.Pb()),2&t){const t=n.dc();n.Ab(1),n.jc("ngForOf",t.options)}}function h(t,i){1&t&&n.hc(0,1,["#customOptionsEl",""])}const g=[[["",8,"trigger"]],[["",8,"custom-options"]]],m=function(t,i,e){return{"w-full":t,"inline-block text-left":i,"inline-flex h-full":e}},C=function(t){return{"w-full":t}},k=function(t,i,e,n,s){return{"overflow-visible":t,"bg-white":i,hidden:e,"block ease-out opacity-100 scale-100":n,"ease-in opacity-0 scale-95":s}},w=[".trigger",".custom-options"];let x=(()=>{class t{constructor(t,i){this.eRef=t,this.cdRef=i,this.isMenuOpen=new n.n,this.onOptionClicked=new n.n,this.options=[{type:"group",childrens:[{url:"/",name:"Settings"}]},{url:"/",name:"Logout",icon:"houseFill"}],this.menuAddSpacing=0,this.menuPosition="v-bottom-left",this.animDuration=100,this.customOptions=!1,this.closeOnOptionClick=!1,this.overflowVisible=!1,this.wFull=!1,this.useFlex=!1,this.isOpen=!1,this.dropdownId="dropdown-",this.orientation="vertical",this.positionClasses="",this.transitionStarted=!1}set setOpen(t){t!==this.isOpen&&"boolean"==typeof t&&this.toggleDropdown(t)}clickout(t){const i=this.eRef.nativeElement.contains(t.target);(this.closeOnOptionClick||!this.closeOnOptionClick&&!i)&&this.isOpen&&(this.transitionStarted=!1,this.toggleDropdown(!1))}ngOnInit(){this.initDropdownId(),this.initPositionClasses()}toggleDropdown(t){!this.transitionStarted&&this.options&&(this.isOpen=void 0!==t?t:!this.isOpen,this.isMenuOpen.emit(this.isOpen),this.transitionStarted=!0,setTimeout(()=>{this.transitionStarted=!1,this.cdRef.detectChanges()},this.animDuration))}optionClicked(t,i,e){const n=Object.assign(Object.assign({},t),{indexParent:i,indexChild:void 0!==e?e:null});this.onOptionClicked.emit(n),this.closeOnOptionClick&&this.toggleDropdown(!1)}initPositionClasses(){switch(this.menuPosition){case"v-top-left":this.positionClasses=`origin-bottom-left bottom-0 ${"mb-"+(11+this.menuAddSpacing)} left-0`,this.orientation="vertical";break;case"v-top-right":this.positionClasses=`origin-bottom-right bottom-0 ${"mb-"+(11+this.menuAddSpacing)} right-0`,this.orientation="vertical";break;case"v-bottom-right":this.positionClasses=`origin-top-right ${"mt-"+(2+this.menuAddSpacing)} right-0`,this.orientation="vertical";break;case"v-bottom-left":this.positionClasses=`origin-top-left ${"mt-"+(2+this.menuAddSpacing)} left-0`,this.orientation="vertical";break;case"h-top-left":this.positionClasses="origin-bottom-right bottom-0 -left-"+(24+this.menuAddSpacing),this.orientation="horizontal";break;case"h-top-right":this.positionClasses="origin-bottom-left bottom-0 -right-"+(24+this.menuAddSpacing),this.orientation="horizontal";break;case"h-bottom-right":this.positionClasses="origin-top-left top-0 -right-"+(24+this.menuAddSpacing),this.orientation="horizontal";break;case"h-bottom-left":this.positionClasses="origin-top-right top-0 -left-"+(24+this.menuAddSpacing),this.orientation="horizontal";break;default:this.positionClasses=`origin-top-left ${"mt-"+(2+this.menuAddSpacing)} left-0`,this.orientation="vertical"}}initDropdownId(){var t;if(!this.options)return;let i=this.options.length,e=this.options.length;if(this.options.length>0&&this.options)for(;i--;){e++;let n=null===(t=this.options[i].childrens)||void 0===t?void 0:t.length;if(n&&!(n<=0))for(;n--;)e++}this.dropdownId+=this.makeId(e+10)}makeId(t){let i="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length;for(;t--;)i+=e.charAt(Math.floor(Math.random()*n));return i}}return t.\u0275fac=function(i){return new(i||t)(n.Mb(n.l),n.Mb(n.h))},t.\u0275cmp=n.Gb({type:t,selectors:[["app-dropdown"]],hostBindings:function(t,i){1&t&&n.Zb("click",function(t){return i.clickout(t)},!1,n.uc)},inputs:{options:"options",setOpen:["isOpen","setOpen"],menuAddSpacing:"menuAddSpacing",menuPosition:"menuPosition",animDuration:"animDuration",customOptions:"customOptions",closeOnOptionClick:"closeOnOptionClick",overflowVisible:"overflowVisible",wFull:"wFull",useFlex:"useFlex"},outputs:{isMenuOpen:"isMenuOpen",onOptionClicked:"onOptionClicked"},ngContentSelectors:w,decls:7,vars:24,consts:[[1,"dropdown","relative","inline-block","text-left",3,"ngClass"],["type","button","data-toggle","dropdown","aria-haspopup","true",3,"ngClass","id","click"],["role","menu",3,"ngClass"],[4,"ngIf","ngIfElse"],["customInner",""],[4,"ngFor","ngForOf"],["singleOption",""],["class","py-1",3,"click",4,"ngFor","ngForOf"],[1,"py-1",3,"click"],["role","menuitem",1,"dropdown-item",3,"routerLink","ngClass"],["class","inline-block mr-1",3,"name",4,"ngIf"],[1,"inline-block","mr-1",3,"name"],["role","menuitem",1,"dropdown-item",3,"routerLink","ngClass","click"]],template:function(t,i){if(1&t&&(n.ic(g),n.Sb(0,"div",0),n.Sb(1,"div",1),n.Zb("click",function(t){return t.stopPropagation(),i.toggleDropdown()}),n.hc(2),n.Rb(),n.Sb(3,"div",2),n.Cc(4,f,2,1,"ng-container",3),n.Cc(5,h,1,0,"ng-template",null,4,n.Dc),n.Rb(),n.Rb()),2&t){const t=n.tc(6);n.jc("ngClass",n.nc(12,m,i.wFull,!i.useFlex,i.useFlex)),n.Ab(1),n.jc("ngClass",n.lc(16,C,i.wFull))("id",i.dropdownId),n.Bb("aria-expanded",i.isOpen),n.Ab(2),n.Db("",i.positionClasses," dropdown-menu shadow-2xl transform transition duration-100 z-20"),n.jc("ngClass",n.pc(18,k,i.overflowVisible,!i.customOptions,!i.isOpen&&!i.transitionStarted,i.isOpen,!i.isOpen)),n.Bb("aria-orientation",i.orientation)("aria-labelledby",i.dropdownId),n.Ab(1),n.jc("ngIf",!i.customOptions)("ngIfElse",t)}},directives:[s.k,s.m,s.l,o.j,c.a],styles:["[_nghost-%COMP%] { display: block; }"],changeDetection:0}),t})()},"vfO+":function(t,i,e){"use strict";e.d(i,"a",function(){return a});var n=e("fXoL"),s=e("ofXK"),o=e("n45d");function c(t,i){if(1&t&&(n.Sb(0,"a",11),n.Ec(1,"Clicca qui"),n.Rb()),2&t){const t=n.dc().ngIf;n.jc("href",t.senderLink,n.xc)}}const l=function(t,i){return{"w-screen":t,"w-full":i}};function r(t,i){if(1&t){const t=n.Tb();n.Sb(0,"div",1),n.Sb(1,"div",2),n.Sb(2,"span",3),n.Ec(3,"da "),n.Sb(4,"b",4),n.Ec(5),n.Rb(),n.Rb(),n.Sb(6,"span",5),n.Zb("click",function(){return n.vc(t),n.dc().closeDetail()}),n.Nb(7,"i-bs",6),n.Rb(),n.Rb(),n.Sb(8,"p",7),n.Ec(9),n.Sb(10,"span",8),n.Ec(11),n.Rb(),n.Rb(),n.Sb(12,"div",9),n.Cc(13,c,2,1,"a",10),n.Rb(),n.Rb()}if(2&t){const t=i.ngIf,e=n.dc();n.jc("ngClass",n.mc(5,l,e.widthFix,!e.widthFix)),n.Ab(5),n.Fc(t.senderName),n.Ab(4),n.Gc(" ",t.senderMessage," "),n.Ab(2),n.Gc(" ","alcuni secondi fa"===t.timeDiff?"un minuto fa":t.timeDiff," "),n.Ab(2),n.jc("ngIf",t.senderLink)}}let a=(()=>{class t{constructor(){this.onCloseDetail=new n.n,this.widthFix=!0}ngOnInit(){}closeDetail(){this.onCloseDetail.emit(!1)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=n.Gb({type:t,selectors:[["app-notification-detail"]],inputs:{detailNotification:"detailNotification",widthFix:"widthFix"},outputs:{onCloseDetail:"onCloseDetail"},decls:1,vars:1,consts:[["class","block max-w-full",3,"ngClass",4,"ngIf"],[1,"block","max-w-full",3,"ngClass"],[1,"inline-flex","items-center","py-2","px-4","bg-black-700","text-gray-400","text-sm","w-full"],[1,"truncate","block","mr-2"],[1,"text-gray-300"],[1,"ml-auto","mr-0","block","text-lg","hover:text-gray-300","cursor-pointer",3,"click"],["name","xCircleFill","width",".9em","height",".9em"],[1,"text-sm","text-gray-400","py-3","px-4","max-w-full","overflow-hidden"],[1,"block","text-gray-500","text-xs","text-right","mt-0.5"],[1,"w-full","px-2","pb-2"],["target","_self","class","btn success w-full block text-center",3,"href",4,"ngIf"],["target","_self",1,"btn","success","w-full","block","text-center",3,"href"]],template:function(t,i){1&t&&n.Cc(0,r,14,8,"div",0),2&t&&n.jc("ngIf",i.detailNotification)},directives:[s.m,s.k,o.a],encapsulation:2,changeDetection:0}),t})()}}]);